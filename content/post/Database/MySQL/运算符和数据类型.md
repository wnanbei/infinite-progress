---
title: "MySQL 运算符与数据类型"
date: 2021-02-06 00:00:00
categories:
  - MySQL
tags:
  - Database
  - MySQL
series:		
---

MySQL 常用类型简单介绍如下：

整数类型：`BIT、BOOL、TINY INT、SMALL INT、MEDIUM INT、 INT、 BIG INT`

浮点数类型：`FLOAT、DOUBLE、DECIMAL`

字符串类型：`CHAR、VARCHAR、TINY TEXT、TEXT、MEDIUM TEXT、LONGTEXT、TINY BLOB、BLOB、MEDIUM BLOB、LONG BLOB`

日期类型：`Date、DateTime、TimeStamp、Time、Year`

其他数据类型：`BINARY、VARBINARY、ENUM、SET`...

<!--more-->

## 运算符

MySQL中主要有四种运算符，分别是：

- 算术运算符
- 比较运算符
- 逻辑运算符
- 位运算符

### 算术运算符

| 算术运算符 | `+` | `-` | `*` | `/` | `%` |
| ------- |:---:|:---:|:----:|:----:|:-----:|
| 作用  | 加 | 减 | 乘 | 除 | 取余 |


### 逻辑运算符

|逻辑运算符|`&&`或`AND`|`!`或`NOT`|`\|\|`或`OR`|`XOR`|
|:------------:|:--------------:|:-----------:|:--------:|:------:|
|作用|与|非|或|异或|

### 位运算符

|位运算符|`&`|`\|`|`~`|`^`|`<<`|`>>`|
|:------:|:----:|:----:|:---:|:------:|:------:|:------:|
|作用|按位与|按位或|按位取反|按位异或|按位左移|按位右移|

### 比较运算符

|比较运算符|作用|示例|
|:-------:|:---------:|:------------:|
|`=`|等于|Id=5|
|`>`|大于|Id>5|
|`<`|小于|Id<5|
|`>=`|大于等于|Id>=5|
|`<=`|小于等于|Id<=5|
|`!=`或`<>`|不等于|Id!=5|
|`IS NULL`|为`NULL`|Id IS NULL|
|`IS NOT NULL`|不为`NULL`|Id IS NOT NULL|
|`BETWEEN AND`|在...范围之间|Id BETWEEN 10 AND 15|
|`IN`|在...列表中|Id IN (3,4,5)|
|`NOT IN`|不在...列表中|Id NOT IN (3,4,5)|
|`LIKE`|模式匹配|Name LIKE 'brow_'|
|`NOT LIKE`|模式匹配|Name NOT LIKE 'brow_'|
|`REGEXP`|正则表达式匹配|Name REGEXP '^bro'|

## 数据类型

MySQL 主要提供了大致三大类数据类型：数值类型，字符类型和日期类型。

### CHAR 和 VARCHAR

字符类型。

| 类型       | 最大长度     | 占用空间       |
| ---------- | ------------ | -------------- |
| CHAR(M)    | 0-255 字节   | 数据实际长度   |
| VARCHAR(M) | 0-65535 字节 | 数据长度+1或+2 |

`注1`：`M` 表示的是字符数，而最大长度的单位是字节。

`注2`：当插入的数据长度超出 M 的范围时，超出部分会被裁剪，严格模式下如果超出长度，则会发生异常。

区别：

- `CHAR` 存储的长度指定后为固定值，占用存储空间也会固定。在存储的值没有达到指定值时，会在字符串右方补齐空格，而在检索的时候，右方补齐的空格会被删掉。
- `VARCHAR` 存储的字符长度是可变的，存储的空间大小也相对应是可变的。当字符长度在 0-255 范围时，`VARCHAR` 会使用一个字节来记录字符的长度，当长度超过 255 时，`VARCHAR` 会使用两个字节来记录字符的长度。

`VARCHAR` 大于某些数值的时候，其会自动转换为 `text`，大概规则如下：

- 大于 varchar(255) 变为 `TINYTEXT`
- 大于 varchar(500) 变为 `TEXT`
- 大于 varchar(20000) 变为 `MEDIUMTEXT`

#### Char 和 Varchar 区别

CHAR 是固定长度的字符类型，VARCHAR 则是可变长度的字符类型。

**共同点**

CHAR(M) 和 VARCHAR(M) 都表示该列能存储 M 个字符。

**CHAR类型特点**

- CHAR 最多可以存储 255 个字符 (注意不是字节)，字符有不同的编码集，比如 UTF8 编码 (3字节)、GBK 编码 (2字节) 等。
- 对于 `CHAR(M)` 如果实际存储的数据长度小于M，则 MySQL 会自动会在它的右边用空格字符补足，但是在检索操作中那些填补出来的空格字符会被去掉。

**VARCHAR类型特点**

- VARCHAR 的最大长度为 65535 个字节。
- VARCHAR 存储的是实际的字符串加1或2个字节用来记录字符串实际长度，字符串长度小于255字节用1字节记录，超过255就需要2字节记录。

### BLOB 和 TEXT

`BLOB` 表示的是二进制字符串(byte strings)。

`TEXT` 表示的则是非二进制字符串，也就是普通的字符串。

`BLOB` 和 `TEXT` 都分别有四个类型，类型间的区别只是长度的区别。L 表示插入的字符串实际占用的字节大小。

| 数据类型                   | 占用存储空间                       |
| -------------------------- | ---------------------------------- |
| `TINYBLOB`，`TINYTEXT`     | **当L < 2的8次方，需要L + 1字节**  |
| `BLOB`，`TEXT`             | **当L < 2的16次方，需要L + 2字节** |
| `MEDIUMBLOB`，`MEDIUMTEXT` | **当L < 2的24次方，需要L + 3字节** |
| `LONGBLOB`，`LONGTEXT`     | **当L < 2的32次方，需要L + 4字节** |

大多数情况下，`TEXT` 和 `VARCHAR` 基本可以等同，它们的区别主要有两个方面：

- `BLOB` 和 `TEXT` 不能设置默认值。
- 对 `BLOB` 和 `TEXT` 的索引，必须指定索引长度。

### ENUM

枚举类型，声明枚举类型的字段可以指定一个由字符串组成的列表，则之后插入的值只能在指定的字符串中选择。

### 整形

| 类型        | 存储大小(字节) | 有符号最小值  | 无符号最小值 | 无符号最大值  | 无符号最大值  |
| ----------- | -------------- | ------------- | ------------ | ------------- | ------------- |
| `TINYINT`   | 1              | `-128`        | `0`          | `127`         | `255`         |
| `SMALLINT`  | 2              | `-32768`      | `0`          | `32767`       | `65535`       |
| `MEDIUMINT` | 3              | `-8388608`    | `0`          | `8388607`     | `16777215`    |
| `INT`       | 4              | `-2147483648` | `0`          | `2147483647`  | `4294967295`  |
| `BIGINT`    | 8              | `-2`的63次方  | `0`          | `2`的63次方-1 | `2`的64次方-1 |

#### int(10) 和 bigint(10)能存储的数据大小一样吗？

不一样，具体原因如下：

- int 能存储四字节有符号整数。
- bigint 能存储八字节有符号整数。

所以能存储的数据大小不一样，其中的数字 `10` 代表的只是数据的显示宽度。[^13]

- 显示宽度指明Mysql最大可能显示的数字个数，数值的位数小于指定的宽度时数字左边会用**空格填充**，空格不容易看出。
- 如果插入了大于显示宽度的值，只要该值不超过该类型的取值范围，数值依然可以插入且能够显示出来。
- 建表的时候指定 `zerofill` 选项，则不足显示宽度的部分用 `0` 填充，如果是 1 会显示成 `0000000001`。
- 如果没指定显示宽度， bigint 默认宽度是 20 ，int默认宽度 11。

### 浮点型

浮点型数值类型主要两种，`FlOAT` 和 `DOUBLE` 类型，分别表示单精度和双精度数值。

`FLOAT` 类型可以表示精度在 0-23 范围内的单精度数值，存储时占四个字节大小。

`DOUBLE` 类型可以表示精度在 24-53 范围内的双精度数值，存储时占八个字节大小。

浮点型数据可以使用一种非标准的语法来指定数据的精度，例如 `FLOAT(M,D)`，`DOUBLE(M,D)`。在这里 `M` 值指的是整个数字的最大位数，`N` 值指的是小数部分的最大位数，如 `FLOAT(7,4)` 能表示的最大数值是 999.9999。同时，MySQL 采用四舍五入，如果把 999.00009 插入到 `FLOAT(7,4)` 中，那么最终保存的结果是 999.0001。

### 定点型

由于有一些应用场景需要精确的数字，所以就有了 `DECIMAL` 类型，主要用来表示精确小数。

`DECIMAL` 同样能使用跟浮点数一样的语法来指定数据的精度，如 `DECIMAL(M,D)`。需要注意的是 `DECIMAL` 最大能表示的位数为 65，但是 `DECIMAL` 默认的限制位数为 `DECIMAL(10,0)`，所以如果要表示更大的位数，需要自行指定。

### 日期类型

| 数据类型    | 描述                                                         | 范围                                                         |
| ----------- | ------------------------------------------------------------ | ------------------------------------------------------------ |
| DATE()      | 日期。格式：YYYY-MM-DD                                       | 从 '1000-01-01' 到 '9999-12-31'                              |
| DATETIME()  | 日期和时间的组合。格式：YYYY-MM-DD HH:MM:SS                  | 从 '1000-01-01 00:00:00' 到 '9999-12-31 23:59:59'            |
| TIMESTAMP() | 时间戳。TIMESTAMP 值使用 Unix 纪元('1970-01-01 00:00:00' UTC) 至今的秒数来存储。格式：YYYY-MM-DD HH:MM:SS | 从 '1970-01-01 00:00:01' UTC 到 '2038-01-09 03:14:07' UTC    |
| TIME()      | 时间。格式：HH:MM:SS                                         | 从 '-838:59:59' 到 '838:59:59'                               |
| YEAR()      | 2 位或 4 位格式的年。                                        | 4 位格式所允许的值：1901 到 2155。2 位格式所允许的值：70 到 69，表示从 1970 到 2069。 |