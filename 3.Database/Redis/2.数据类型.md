在 Redis 中，常用的 5 种数据类型和应用场景如下：

- `String`：缓存、计数器、限速器、分布式锁等。

- `List`：链表、队列、微博关注人时间轴列表等。

- `Hash`： 用户信息、Hash 表等。

- `Set`： 去重、赞、踩、共同好友等。

- `Zset`：访问量排行榜、点击量排行榜等。

## redisObject

Redis 有一个核心的对象 `redisObject`，用来表示所有的 key。此对象中有 type 和 encoding 两个字段，用来表示 key 的类型和底层数据结构。

Redis 使用对象来表示数据库中的键和值，每次当我们在Redis的数据库中新创建一个键值对时，我们至少会创建两个对象，一个对象用作键值对的健(键对象)，另一个对象用作键值对的值(值对象)。

```c
Copytypedef struct redisObiect{
	//类型
	unsigned type:4;
	//编码
	unsigned encoding:4;
	//指向底层数据结构的指针
	void *ptr;
}
```

不同数据类型使用不同的数据结构以提升速度。每种数据类型都有一种或者多种数据结构来支撑。

![Redis 数据类型与数据结构关系](/Users/wnanbei/Documents/文档/infinity-progress/assets/Redis数据类型.png)

这样设计有两个好处：

1. 可以自由改进内部编码，而对外的数据结构和命令没有影响。
2. 多种内部编码实现可以在不同场景下发挥各自的优势，从而优化对象在不同场景下的使用效率。

使用以下命令可以查看 Key 具体的编码方式：

```redis
> object encoding keyName
```

